var lastFive, mustache, byDate, getPostLocation;

mustache = require( 'mustache' );
byDate = require( 'byDate' );
getPostLocation = require( 'getPostLocation' );


lastFive = function ( template, data ) {
	var clone, result, rendered;

	clone = data.concat();

	// sort by date
	clone.sort( byDate );

	// cutoff
	result = clone.slice( 0, 5 ).map( function ( post ) {
		post.url = getPostLocation.url( post );
		return post;
	});

	rendered = mustache.render( template, result );

	return rendered;
};

module.exports = lastFive;