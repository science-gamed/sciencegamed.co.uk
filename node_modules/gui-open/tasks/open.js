module.exports = function ( grunt ) {
	
	grunt.registerTask( 'open', 'Fire up a server (uses Express)', function () {
		var express, path, http, app, basePath, sys;

		this.async();

		express = require( 'express' ),
		path = require( 'path' ),
		http = require( 'http' );
		sys = require( 'sys' );

		// fail if no 'data' option set
		grunt.config.requires( 'open' );

		root = grunt.config('open.root' );
		basePath = path.join( process.env.PWD, root );

		app = express();

		app.use( express[ 'static' ]( basePath ) );
		app.listen( 1337 );

		sys.exec( 'open http://localhost:1337' );
	});

};