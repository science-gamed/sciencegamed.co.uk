var blogPost, mustache, getPath, mostRecent;


mustache = require( 'mustache' );
getPath = require( 'utils/getPath' );
mostRecent = require( 'snippets/mostRecent.js' );


blogPost = function ( data ) {
	var pages, i, id, post, mustacheData;

	pages = [];
	sidebar = mostRecent( data, 5 );

	i = data.blogposts.length;
	while ( i-- ) {
		mustacheData = data.blogposts[ i ];
		mustacheData.sidebar = sidebar;

		pages[ pages.length ] = {
			path: 'blog/' + mustacheData.path,
			data: mustache.render( data.templates.blogpost, mustacheData, data.templates.partials )
		};
	}

	return pages;
};


module.exports = blogPost;