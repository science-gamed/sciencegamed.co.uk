var mostRecent;


mostRecent = require( 'snippets/mostRecent.js' );


module.exports = function ( data, helpers ) {
	var pages, i, id, posts, post, mustacheData;

	pages = [];
	sidebar = mostRecent( data, 5 );

	posts = data.content.blogposts;

	i = posts.length;
	while ( i-- ) {
		mustacheData = posts[ i ];
		mustacheData.sidebar = sidebar;

		pages[ pages.length ] = {
			path: 'blog/' + mustacheData.path,
			data: helpers.mustache.render( data.templates.blogpost, mustacheData, data.templates.partials )
		};
	}

	return pages;
};