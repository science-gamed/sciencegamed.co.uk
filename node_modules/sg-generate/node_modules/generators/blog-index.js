module.exports = function ( data, helpers ) {
	var pages, i, id, posts;

	posts = data.content.blogposts.sort( sortByDate ).slice( 0, 5 ).map( function ( post ) {
		post.preview = helpers.parseMarkdown( post.markdown.substr( 0, 250 ) + '...' );
		return post;
	});

	pages = [
		{
			path: 'blog/index.html',
			data: helpers.mustache.render( data.templates.blogindex, { posts: posts }, data.templates.partials )
		}
	];

	return pages;
};