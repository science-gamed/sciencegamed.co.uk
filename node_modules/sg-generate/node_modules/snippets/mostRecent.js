var mostRecent, mustache, byDate, getPath;

mustache = require( 'mustache' );
sortByDate = require( 'utils/sortByDate' );
getPath = require( 'utils/getPath' );


mostRecent = function ( data, num ) {
	var posts, result, rendered;

	posts = data.blogposts.concat();

	// sort by date
	posts.sort( sortByDate );

	// cutoff
	result = posts.slice( 0, num || posts.length ).map( function ( post ) {
		post.url = '/blog/' + getPath( post );
		return post;
	});

	rendered = mustache.render( data.templates.snippets.headlinelist, result );

	return rendered;
};

module.exports = mostRecent;